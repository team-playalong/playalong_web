<form name="builder" novalidate>

  <div class="message-bar" ng-model="message"></div>
  <md-content class="md-padding md-whiteframe-z4 builder">
    <div layout="row">
      <md-input-container flex>
        <label>Artist</label>
        <input required name="artist" ng-model="chord.artist">
      </md-input-container>
      <span flex="10"></span>
      <md-input-container flex>
        <label>Title</label>
        <input required ng-model="chord.title">
      </md-input-container>
    </div>

    <div layout="row" layout-wrap>
      <div flex="50">
        <md-switch class="ply-switch" ng-model="isPreviewMode" aria-label="Switch 1" ng-change="handleSwitchModes()">
            Switch To {{getTextByMode()}} Mode
          </md-switch>
          <md-switch class="ply-switch" ng-model="chord.approved" aria-label="Approved" ng-if="login.isSuperUser()">
              Approved?
            </md-switch>
      </div>
      <div flex="50">
        <md-button  class="md-raised md-accent pull-right"
          type="submit"
          ng-click="createChordInDb()"
          ng-if="!$stateParams.id && !chordCreated">
          Create Chord
        </md-button>
        <md-button  class="md-primary md-hue-1 pull-right"
          ng-if="$stateParams.id || chordCreated"
          ng-click="goToChordPage(chord)">
          Return To Chord Page
        </md-button>
      </div>
    </div>
    <div layout="row" class="ply-editor-wrapper">
      <text-angular ng-show="!isPreviewMode" class="ply-editor"  flex ng-model="chord.content"></text-angular>
      <div  ng-show="isPreviewMode" flex class="ply-chord-preview"
            ng-bind-html="chord.content"></div>
    </div>
    <div layout="row" layout-wrap>
      <div flex="50">
        <md-switch class="ply-switch" ng-model="isPreviewMode" aria-label="Switch 1" ng-change="handleSwitchModes()">
            Switch To {{getTextByMode()}} Mode
          </md-switch>
      </div>
    </div>

    <md-button  class="md-raised md-accent pull-right"
                type="submit"
                ng-click="createChordInDb()"
                ng-if="!$stateParams.id && !chordCreated">
                Create Chord
    </md-button>
  </md-content>
</form>
